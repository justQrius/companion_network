<story-context id=".bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>1</epicId>
    <storyId>1</storyId>
    <title>Initialize Development Environment with Modern Tooling</title>
    <status>drafted</status>
    <generatedAt>2025-11-30</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/1-1-initialize-development-environment-with-modern-tooling.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>a developer</asA>
    <iWant>a properly configured Python development environment with modern dependency management</iWant>
    <soThat>I can develop the Companion Network efficiently with fast package installation and reproducible builds</soThat>
    <tasks>
      - Task 1: Install uv package manager (AC: 1)
        - Subtask 1.1: Verify system meets prerequisites (Windows/macOS/Linux)
        - Subtask 1.2: Run installation script appropriate for OS (PowerShell for Windows, curl for macOS/Linux)
        - Subtask 1.3: Verify uv installation with `uv --version`
      - Task 2: Verify Python 3.10+ availability (AC: 1)
        - Subtask 2.1: Check current Python version with `python --version`
        - Subtask 2.2: If Python < 3.10, install Python 3.10+ via official installer or uv
        - Subtask 2.3: Confirm Python 3.10+ accessible in PATH
      - Task 3: Create and activate virtual environment (AC: 1)
        - Subtask 3.1: Navigate to project root directory
        - Subtask 3.2: Run `uv venv` to create virtual environment
        - Subtask 3.3: Activate venv (`.venv\Scripts\activate` on Windows, `source .venv/bin/activate` on Unix)
        - Subtask 3.4: Verify activation by checking prompt changes and `which python` output
      - Task 4: Document installation commands in implementation notes (AC: All)
        - Subtask 4.1: Document successful installation commands for each OS
        - Subtask 4.2: Note any issues encountered and resolutions
        - Subtask 4.3: Verify `.venv` directory created in project root
    </tasks>
  </story>

  <acceptanceCriteria>
    AC1: Environment Ready - uv is installed, and a virtual environment is created and activated with Python 3.10+
    - uv (ultra-fast Python package manager) v1.0+
    - Python 3.10+ runtime
    - Virtual environment created via `uv venv`
    - Virtual environment activated successfully
    - running `uv --version` shows installed version
    - running `python --version` shows Python 3.10 or later
    - the `.venv` directory exists in the project root
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture Document - Project Initialization</title>
        <section>Project Initialization (lines 34-64)</section>
        <snippet>Manual setup with modern tooling. Installation commands for uv (Windows: powershell, macOS/Linux: curl) and Python 3.10+ venv creation via `uv venv`. Rationale: 10-100x faster than pip, unified tool replacing pip+venv+pip-tools.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture Document - Technology Decisions</title>
        <section>Technology Decisions (lines 66-75)</section>
        <snippet>Decision table: Python 3.10+ (required by ADK), uv (10-100x faster than pip, Rust-based), uv venv (3x faster), ADK standard agent structure, .env for secrets. Updated 2025-11-30.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture Document - Development Environment</title>
        <section>Development Environment (lines 760-800)</section>
        <snippet>Prerequisites: Python 3.10+, pip, Git, Google AI Studio API key. Setup commands: Install uv, create venv with `uv venv`, activate, install dependencies with `uv pip install`.</snippet>
      </doc>
      <doc>
        <path>docs/sprint-artifacts/tech-spec-epic-1.md</path>
        <title>Epic 1 Technical Specification</title>
        <section>Overview (lines 10-13), Dependencies (lines 85-92)</section>
        <snippet>Epic establishes fundamental technical groundwork. Objectives include environment setup with uv and Python 3.10+. Core libraries: google-adk >= 1.19.0, mcp[cli] >= 1.22.0, gradio, python-dotenv.</snippet>
      </doc>
      <doc>
        <path>docs/sprint-artifacts/tech-spec-epic-1.md</path>
        <title>Epic 1 Technical Specification - Acceptance Criteria</title>
        <section>Acceptance Criteria (lines 94-102)</section>
        <snippet>AC1: Environment Ready - uv installed, virtual environment created/activated with Python 3.10+. AC2: Structure Created. AC3: Dependencies Installed (uv.lock exists). AC4-6: Secrets, Git, Documentation.</snippet>
      </doc>
      <doc>
        <path>docs/epics.md</path>
        <title>Epics - Story 1.1 Detailed</title>
        <section>Story 1.1 (lines 106-133)</section>
        <snippet>User story: developer wants modern environment with uv. ACs: uv v1.0+, Python 3.10+, venv created via `uv venv`, activated. Prerequisites: None (first story). Technical notes: uv provides 10-100x faster installation, unified tooling.</snippet>
      </doc>
      <doc>
        <path>docs/prd.md</path>
        <title>PRD - Technical Stack</title>
        <section>Technical Stack (lines 143-150)</section>
        <snippet>Google ADK for agents, Gemini 2.5 Pro, A2A Protocol, MCP Python SDK, Gradio for UI, SQLite for sessions, uv for dependency management (10-100x faster than pip).</snippet>
      </doc>
    </docs>
    <code>
      <!-- No existing code artifacts - this is the first story in a greenfield project -->
    </code>
    <dependencies>
      <python>
        <runtime>Python 3.10+</runtime>
        <package-manager>uv (Astral, latest)</package-manager>
        <note>uv will be installed first, before creating venv. No pre-existing pyproject.toml or requirements.txt yet.</note>
      </python>
    </dependencies>
  </artifacts>

  <constraints>
    - This is the FIRST story in Epic 1 - no dependencies on prior stories
    - Clean development machine (Windows, macOS, or Linux)
    - Internet connection required for downloading uv and Python (if needed)
    - uv is standalone binary with no Python dependencies for installation
    - Virtual environment must be created in project root as `.venv`
    - Installer scripts automatically add uv to system PATH
    - ADR-005 from Architecture: uv selected for 10-100x speed improvement over pip
    - Python 3.10+ is REQUIRED by Google ADK (per Architecture doc line 70, 305)
  </constraints>

  <interfaces>
    <tool>
      <name>uv package manager</name>
      <kind>CLI command</kind>
      <signature>uv venv - Create virtual environment</signature>
      <path>System PATH (after installation)</path>
    </tool>
    <tool>
      <name>uv package manager</name>
      <kind>CLI command</kind>
      <signature>uv --version - Verify installation</signature>
      <path>System PATH (after installation)</path>
    </tool>
    <tool>
      <name>Python runtime</name>
      <kind>CLI command</kind>
      <signature>python --version - Verify Python 3.10+</signature>
      <path>System PATH or venv PATH</path>
    </tool>
  </interfaces>

  <tests>
    <standards>
      Manual verification for environment setup stories. Execute commands in sequence and verify expected outcomes. No automated unit tests required for foundational tooling installation.
    </standards>
    <locations>
      No test files for this story - manual verification via command execution and output inspection.
    </locations>
    <ideas>
      <test ac="AC1" idea="Execute `uv --version` after installation and verify version 1.0 or higher is displayed" />
      <test ac="AC1" idea="Execute `python --version` inside activated venv and verify Python 3.10.x or later" />
      <test ac="AC1" idea="Verify `.venv` directory exists in project root after `uv venv` command" />
      <test ac="AC1" idea="Verify shell prompt shows `(.venv)` prefix after activation command" />
      <test ac="AC1" idea="Execute `which python` (Unix) or `where python` (Windows) and verify it points to `.venv` directory" />
    </ideas>
  </tests>
</story-context>
